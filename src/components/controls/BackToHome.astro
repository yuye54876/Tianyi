---
import FloatingButton from "@/components/common/FloatingButton.astro";
import I18nKey from "@/i18n/i18nKey";
import { i18n } from "@/i18n/translation";
---

<FloatingButton
  id="back-to-home-btn"
  icon="material-symbols:home-outline-rounded"
  ariaLabel={i18n(I18nKey.home)}
  onclick="backToHome()"
  class="hide"
/>

<script is:raw is:inline>
  function backToHome() {
    const url = "/";
    if (window.swup) {
      window.swup.navigate(url);
    } else {
      window.location.href = url;
    }
  }
</script>

<script>
  function updateBackToHomeVisibility() {
    const btn = document.getElementById("back-to-home-btn");
    if (!btn) return;

    // Check if we are on the home page
    const path = window.location.pathname.replace(/\/$/, "") || "/";
    const isHome = path === "/" || path === "/index.html"; 
    
    if (isHome) {
      btn.classList.add("hide");
    } else {
      btn.classList.remove("hide");
    }
  }

  // Initial check
  updateBackToHomeVisibility();
  
  // Re-check on view transitions or swup navigation
  document.addEventListener("astro:page-load", updateBackToHomeVisibility);
  document.addEventListener("swup:contentReplaced", updateBackToHomeVisibility);
</script>
